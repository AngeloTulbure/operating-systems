
import java.util.*;

public class Cliente extends Thread
{  Supermercato s;
	int id;
	Random r;
	
	public  Cliente(Supermercato S, int i, Random R)
	{	   this.s=S;
		   this.id=i;
		   this.r=R;
	}

	public void run() {
	boolean entrato=false;
	int volte=0, importo;
	System.out.println("Creato cliente n." + id + ") !");
	for (volte=0; volte<5; volte++)
	{	entrato = s.entra(id);//verifica posto + ev. occupazione
		try {	
			if (entrato)
			{	
				System.out.println("ENTRATO!! Il thread " + id + "  e' riuscito a entrare!"); 
				Thread.sleep(r.nextInt(10)*1000); // fa la spesa
				importo=r.nextInt(1000); //definizione importo totale
				s.esce(id, importo);  // paga ed esci
				break;
			}
			else {
				System.out.println("sono il  thread " + id + ":  non sono riuscito a entrare, mi faccio un giro..."); 
				Thread.sleep(r.nextInt(5)*1000); // fa un giro
			}
	} catch (InterruptedException e) {	}
	}
	if (!entrato)
		System.out.println("sono il  thread " + id + ":  dopo 5 tentativi non sono riuscito a entrare. Vado a casa!");
		
	
}
}